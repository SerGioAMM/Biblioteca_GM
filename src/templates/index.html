<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Biblioteca Comunitaria Gabriela Mistral</title>
    <link rel="icon" href="/static/img/books_3145874.png">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/colores.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/barra_lateral.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/estilo_inicio.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/general.css') }}">
    
    <!--! Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/bootstrap.css') }}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
</head>
<body class="bg-custom">
    <header>
        {% include 'navbar.html' %}
    </header>
    <main class="bg-custom">
        
        <!-- SECCION PRINCIPAL -->
        <section class="seccion-principal bg-custom h-50">
                <div class="presentacion-biblioteca pb-5">
                    <h1><br>Biblioteca Comunitaria Gabriela Mistral</h1>
                    <h3>San Juan Chamelco</h3>
                    <br>
                    <a href="{{ url_for('libros.libros') }}"> 
                        <button type="button" class="btn btn-secondary">Explora nuestro cat√°logo con mas de {{total_libros}} libros</button>
                    </a>
                </div>
        </section>

    <!-- SECCION LIBROS DESTACADOS -->
    <section class="seccion-libros-destacados bg-light-custom">
        <h1 class="h1-titulo text-dark-custom">Libros destacados</h1>
        
        {% for seccion in libros_destacados %}
            <br> <br>
            {% if (seccion.destacados|length > 0) %}
                <h2 class="text-dark-custom">{{ seccion.seccion }}</h2>
                <div class="row row-cols-1 row-cols-md-6 mx-2 g-4">
                {% for libro in seccion.destacados %}
                    <div class="col">
                        <div class="card h-100">
                        <div class="card-header bg-transparent border-secondary p-0">
                            <span class="span-notacion"
                                {% if (libro[7]|int) < 100 %}
                                    id="h2-seccion-0"
                                {% elif (libro[7]|int) < 200 %}
                                    id="h2-seccion-1"
                                {% elif (libro[7]|int) < 300 %}
                                    id="h2-seccion-2"
                                {% elif (libro[7]|int) < 400 %}
                                    id="h2-seccion-3"
                                {% elif (libro[7]|int) < 500 %}
                                    id="h2-seccion-4"
                                {% elif (libro[7]|int) < 600 %}
                                    id="h2-seccion-5"
                                {% elif (libro[7]|int) < 700 %}
                                    id="h2-seccion-6"
                                {% elif (libro[7]|int) < 800 %}
                                    id="h2-seccion-7"
                                {% elif (libro[7]|int) < 900 %}
                                    id="h2-seccion-8"
                                {% else %}
                                    id="h2-seccion-9"
                                {% endif %} > 
                                <h2>{{libro[2]}}</h2> 
                            </span><!-- Notacion  -->
                        </div>
                        <img src="{{ url_for('static', filename='img/book.png') }}" class="card-img-top img-fluid mx-auto" alt="...">
                        <div class="card-body">
                            <h6 class="card-title">{{libro[3]}}</h6><!-- Titulo  --> 
                            <small class="card-text text-body-secondary">{{libro[4]}}&nbsp;{{libro[5]}} <!-- Nombre y apellido del autor  -->
                            {{libro[6]}}</small><!-- Anio de publicacion  -->
                        </div>
                        <div class="card-footer">
                            <span class="destacado">
                            <h4 class="h4-destacado"> <i class="bi bi-star-fill"></i> Destacado</h4>
                            </span>
                            <span id="span-info-libro-d"> 
                            <h5
                                {% if (libro[7]|int) < 100 %}
                                    id="h4-seccion-0"
                                {% elif (libro[7]|int) < 200 %}
                                    id="h4-seccion-1"
                                {% elif (libro[7]|int) < 300 %}
                                    id="h4-seccion-2"
                                {% elif (libro[7]|int) < 400 %}
                                    id="h4-seccion-3"
                                {% elif (libro[7]|int) < 500 %}
                                    id="h4-seccion-4"
                                {% elif (libro[7]|int) < 600 %}
                                    id="h4-seccion-5"
                                {% elif (libro[7]|int) < 700 %}
                                    id="h4-seccion-6"
                                {% elif (libro[7]|int) < 800 %}
                                    id="h4-seccion-7"
                                {% elif (libro[7]|int) < 900 %}
                                    id="h4-seccion-8"
                                {% else %}
                                    id="h4-seccion-9"
                                {% endif %} >
                                {{libro[7]}} - {{libro[8]}} 
                            </h5> <!-- Codigo de seccion + seccion  --> 
                        </span>
                        {% if libro[9]|int == 1 %}
                            <span id="span-disponibilidad-libro-d"> <h4 id="h4-disponible">Disponible: {{libro[9]}} copia</h4></span>
                        {% elif libro[9]|int > 1 %}
                            <span id="span-disponibilidad-libro-d"> <h4 id="h4-disponible">Disponible: {{libro[9]}} copias</h4></span>
                        {% else %}
                            <span id="span-disponibilidad-libro-d"> <h4 id="h4-no_disponible">No disponible</h4></span>
                        {% endif %}
                        </div>
                        </div>
                    </div>
                    <!--
                    <a href="{{ url_for('libros.buscar_libro', buscar=libro[3], filtro_busqueda='Titulo', categorias='Todas') }}">ENLACE</a>
                    -->
                    {% endfor %}
            {% elif (seccion.destacados|length == 0) %}
                <h2 class="text-dark-custom">{{ seccion.seccion }}</h2>
                <div class="row row-cols-1 row-cols-md-6 mx-2 g-4">
            {% endif %}
                {% for libro in seccion.aleatorios %}
                <div class="col">
                    <div class="card h-100">
                    <div class="card-header bg-transparent border-secondary p-0">
                        <span class="span-notacion"
                            {% if (libro[7]|int) < 100 %}
                                id="h2-seccion-0"
                            {% elif (libro[7]|int) < 200 %}
                                id="h2-seccion-1"
                            {% elif (libro[7]|int) < 300 %}
                                id="h2-seccion-2"
                            {% elif (libro[7]|int) < 400 %}
                                id="h2-seccion-3"
                            {% elif (libro[7]|int) < 500 %}
                                id="h2-seccion-4"
                            {% elif (libro[7]|int) < 600 %}
                                id="h2-seccion-5"
                            {% elif (libro[7]|int) < 700 %}
                                id="h2-seccion-6"
                            {% elif (libro[7]|int) < 800 %}
                                id="h2-seccion-7"
                            {% elif (libro[7]|int) < 900 %}
                                id="h2-seccion-8"
                            {% else %}
                                id="h2-seccion-9"
                            {% endif %} > 
                            <h2>{{libro[2]}}</h2> 
                        </span><!-- Notacion  -->
                    </div>
                    <img src="{{ url_for('static', filename='img/book.png') }}" class="card-img-top" alt="...">
                    <div class="card-body">
                        <h6 class="card-title">{{libro[3]}}</h6><!-- Titulo  --> 
                        <small class="card-text text-body-secondary">{{libro[4]}}&nbsp;{{libro[5]}} <!-- Nombre y apellido del autor  -->
                        {{libro[6]}}</small><!-- Anio de publicacion  -->
                    </div>
                    <div class="card-footer">
                        <span class="aleatorio">
                        <h4 class="h4-aleatorio"> <i class="bi bi-shuffle"></i> Aleatorio</h4>
                        </span>
                        <span id="span-info-libro-d"> 
                        <h5
                            {% if (libro[7]|int) < 100 %}
                                id="h4-seccion-0"
                            {% elif (libro[7]|int) < 200 %}
                                id="h4-seccion-1"
                            {% elif (libro[7]|int) < 300 %}
                                id="h4-seccion-2"
                            {% elif (libro[7]|int) < 400 %}
                                id="h4-seccion-3"
                            {% elif (libro[7]|int) < 500 %}
                                id="h4-seccion-4"
                            {% elif (libro[7]|int) < 600 %}
                                id="h4-seccion-5"
                            {% elif (libro[7]|int) < 700 %}
                                id="h4-seccion-6"
                            {% elif (libro[7]|int) < 800 %}
                                id="h4-seccion-7"
                            {% elif (libro[7]|int) < 900 %}
                                id="h4-seccion-8"
                            {% else %}
                                id="h4-seccion-9"
                            {% endif %} >
                            {{libro[7]}} - {{libro[8]}} 
                        </h5> <!-- Codigo de seccion + seccion  --> 
                    </span>
                    {% if libro[9]|int == 1 %}
                        <span id="span-disponibilidad-libro-d"> <h4 id="h4-disponible">Disponible: {{libro[9]}} copia</h4></span>
                    {% elif libro[9]|int > 1 %}
                        <span id="span-disponibilidad-libro-d"> <h4 id="h4-disponible">Disponible: {{libro[9]}} copias</h4></span>
                    {% else %}
                        <span id="span-disponibilidad-libro-d"> <h4 id="h4-no_disponible">No disponible</h4></span>
                    {% endif %}
                    </div>
                    </div>
                </div>
                <!--
                <a href="{{ url_for('libros.buscar_libro', buscar=libro[3], filtro_busqueda='Titulo', categorias='Todas') }}">ENLACE</a>
                -->
                {% endfor %}
            </div>
            {% endfor %}
            <br><br>
    </section>

    <!-- SECCION Actividades -->
    <section class="seccion-actividades bg-light-custom">
    <h1 class="h1-titulo text-dark-custom">Actividades</h1>
        <div class="row row-cols-1 row-cols-md-4 mx-2 g-4">
            {% for actividad in actividades %}
                <div class="col">
                    <div class="card h-100">
                        <div class="card-header"> <h5 class="card-title">{{actividad.titulo}}</h5></div>
                        <img src="{{ actividad.imagen }}" class="card-img-top img-fluid mx-auto my-3" style="width: 40%;" alt="...">
                        <div class="card-body">
                            <p class="card-text" style="white-space: pre-line;">{{actividad.descripcion}}</p>
                        </div>
                        <div class="card-footer">
                            <span class="etiqueta etiqueta-{{actividad.tipo|lower}}">{{actividad.tipo}}</span>
                        </div>      
                    </div>
                </div>
            {% endfor %}
        </div>
    </section>

    </main>
    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-copyright">
                <p>&copy; <span id="current-year"></span> Biblioteca Municipal.</p>
            </div>
        </div>
    </footer>
    <script src="/static/js/menu.js"></script>
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js" integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q" crossorigin="anonymous"></script>
    <script>
        document.getElementById('current-year').textContent = new Date().getFullYear();
    </script>
    </body>
</html>
